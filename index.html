<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Text to Logical Animation</title>
    <script src="https://unpkg.com/textalive-app-api"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
  </head>
  <body>
    <div>
      <textarea id="text-input" rows="10" cols="50"></textarea>
    </div>
    <button id="generate-animation-btn">Generate Animation</button>
    <div id="animation-container"></div>
    
    <script>
      // Set up TextAlive API
      const app = new TextAliveApp();
      app.options.player = new TextAlivePlayer(document.querySelector("#animation-container"));
      
      // Set up anime.js
      const animation = anime.timeline({
        autoplay: false,
        easing: "easeOutExpo",
        duration: 500,
      });
      
      // Set up event listeners
      document.querySelector("#generate-animation-btn").addEventListener("click", function() {
        const text = document.querySelector("#text-input").value;
        const words = text.split(" ");
        
        // Set up animation sequence
        animation.add({
          targets: ".animation-word",
          opacity: 1,
          translateY: [50, 0],
          delay: anime.stagger(100),
        });
        animation.add({
          targets: ".animation-word",
          opacity: 0,
          translateY: [0, -50],
          delay: anime.stagger(100),
        }, "+=5000");
        
        // Set up TextAlive lyrics
        const songUrl = "https://www.youtube.com/watch?v=Zzu15ZezipE"; // Replace with desired song URL
        app.songUrl = songUrl;
        app.request("measures").then(function(measures) {
          const duration = measures.duration;
          const lyric = new TextAliveLyric(words);
          lyric.duration = duration;
          app.setLyric(lyric);
          
          // Start animation
          animation.play();
        });
      });
    </script>
  </body>
</html>
