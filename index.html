<!DOCTYPE html>
<html>
<head>
    <title>Newly Created Tokens on Ethereum</title>
</head>
<body>
    <h1>Newly Created Tokens on Ethereum</h1>
    <div id="tokenList"></div>

<script>
        // Replace with your Etherscan API key
        const etherscanApiKey = 'AFFD2SXUNV3RY968V4442KMBP4928IBMJ7';

        async function fetchTokenDetails(contractAddress) {
            try {
                const response = await fetch(`https://api.etherscan.io/api?module=contract&action=getabi&address=${contractAddress}&apikey=${etherscanApiKey}`);
                const data = await response.json();

                if (data.status === '1' && data.message === 'OK') {
                    const tokenABI = JSON.parse(data.result);
                    return tokenABI;
                } else {
                    console.error('Error fetching contract details:', data.message);
                    return null;
                }
            } catch (error) {
                console.error('Error fetching contract details:', error);
                return null;
            }
        }

        async function fetchTokenBalance(contractAddress) {
            try {
                const response = await fetch(`https://api.etherscan.io/api?module=account&action=balance&address=${contractAddress}&apikey=${etherscanApiKey}`);
                const data = await response.json();

                if (data.status === '1') {
                    const balance = parseFloat(data.result) / 1e18; // Convert from wei to ether
                    return balance;
                } else {
                    console.error('Error fetching balance:', data.message);
                    return null;
                }
            } catch (error) {
                console.error('Error fetching balance:', error);
                return null;
            }
        }

        async function fetchLastFiveTransactions(contractAddress) {
            try {
                const response = await fetch(`https://api.etherscan.io/api?module=account&action=txlist&address=${contractAddress}&startblock=0&endblock=99999999&sort=desc&apikey=${etherscanApiKey}`);
                const data = await response.json();

                if (data.status === '1') {
                    const transactions = data.result.slice(0, 5);
                    return transactions;
                } else {
                    console.error('Error fetching transactions:', data.message);
                    return null;
                }
            } catch (error) {
                console.error('Error fetching transactions:', error);
                return null;
            }
        }

        async function fetchNewTokens() {
            try {
                const response = await fetch(`https://api.etherscan.io/api?module=account&action=tokentx&address=0x0000000000000000000000000000000000000000&startblock=0&endblock=999999999&sort=desc&apikey=${etherscanApiKey}`);
                const data = await response.json();

                if (data.status === '1') {
                    const tokenList = document.getElementById('tokenList');

                    if (data.result && data.result.length > 0) {
                        for (const tokenTx of data.result) {
                            const contractAddress = tokenTx.contractAddress;
                            const tokenInfo = `
                                <div>
                                    <strong>Token Name:</strong> ${tokenTx.tokenName}<br>
                                    <strong>Token Symbol:</strong> ${tokenTx.tokenSymbol}<br>
                                    <strong>Token Contract Address:</strong> ${contractAddress}<br>
                                    <strong>Transaction Hash:</strong> ${tokenTx.hash}<br>
                                    <strong>Contract ABI:</strong><br>
                                    <textarea rows="10" cols="80">${await fetchTokenDetails(contractAddress)}</textarea><br>
                                    <strong>Balance:</strong> ${await fetchTokenBalance(contractAddress)} ETH<br>
                                    <strong>Last Five Transactions:</strong><br>
                                    <ul>
                                        ${await getLastFiveTransactionDetails(contractAddress)}
                                    </ul>
                                </div>
                            `;
                            tokenList.insertAdjacentHTML('beforeend', tokenInfo);
                        }
                    } else {
                        tokenList.innerHTML = '<p>No newly created tokens found.</p>';
                    }
                } else {
                    console.error('Error fetching token data:', data.message);
                }
            } catch (error) {
                console.error('Error fetching token data:', error);
            }
        }

        async function getLastFiveTransactionDetails(contractAddress) {
            const transactions = await fetchLastFiveTransactions(contractAddress);
            if (transactions) {
                let transactionDetails = '';
                for (const tx of transactions) {
                    transactionDetails += `<li>
                        <strong>From:</strong> ${tx.from}<br>
                        <strong>To:</strong> ${tx.to}<br>
                        <strong>Value:</strong> ${parseFloat(tx.value) / 1e18} ETH<br>
                        <strong>Transaction Hash:</strong> ${tx.hash}<br>
                        <br>
                    </li>`;
                }
                return transactionDetails;
            } else {
                return '<li>Error fetching transactions.</li>';
            }
        }

        fetchNewTokens();
    </script>
</body>
</html>
