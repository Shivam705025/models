<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Text to Music</title>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
  <div>
    <textarea id="text-input" rows="10" cols="50"></textarea>
  </div>
  <button id="generate-music-btn">Generate Music</button>
  <div id="audio-player"></div>

  <script>
    $(document).ready(function() {
      $('#generate-music-btn').click(function() {
        const consumerKey = 'N2l5GVPRoI1zoKkh6dkGsE3uZ419Mn56';
        const consumerSecret = 'K2d1AAdXoiB4EqAd';
        const text = $('#text-input').val();

        // Get access token
        $.ajax({
          url: 'https://api.shutterstock.com/v2/auth/access_token',
          headers: {
            Authorization: `Basic ${btoa(`${consumerKey}:${consumerSecret}`)}`,
          },
          method: 'POST',
          data: {
            grant_type: 'client_credentials',
          },
          success: function(response) {
            const accessToken = response.access_token;

            // Make request to Shutterstock API
            $.ajax({
              url: `https://api.shutterstock.com/v2/audio/generate?text=${encodeURIComponent(text)}`,
              headers: {
                Authorization: `Bearer ${accessToken}`,
              },
              method: 'POST',
              data: {
                genre: 'rock',
                tempo: 'medium',
                mood: 'happy',
              },
              success: function(data) {
                // Get audio URL from response
                const audioUrl = data.data.attributes.url;

                // Create audio player with URL
                const audioPlayer = `<audio controls><source src="${audioUrl}" type="audio/mpeg"></audio>`;
                $('#audio-player').html(audioPlayer);
              },
              error: function(error) {
                console.log(error);
              },
            });
          },
          error: function(error) {
            console.log(error);
          },
        });
      });
    });
  </script>
</body>
</html>
